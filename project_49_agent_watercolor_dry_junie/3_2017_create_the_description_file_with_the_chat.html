<!-- Enlighter Metainfo
{
  "id": 2017,
  "title": "Create the description file with the Chat",
  "next_button_title": null
}
-->
<p>Chat knows how to create files and a whole application. Let's start small, ask it to create a file in the root of your project that describes in detail how the application works. We have prepared this file for you, you will need to edit it a bit in the future.</p>

<p>
<checkable-item title="Run this command in Chat:">

<callout type="composer">
Create a file named project-rules.txt in the root of my project. Add the following content to it:
1. Application Architecture:
   1.1. Use Gradio to create a web-based chatbot interface with:
       - Text input for user messages
       - Image upload capability
       - Chat history display
       - Image output display for processed images
   1.2. Implement state management to maintain chat history
   1.3. Use LangChain framework for agent implementation

2. Core Components:
   2.1. Watercolor Painter (image_painter.py):
       - Use StableDiffusionImg2ImgPipeline from diffusers package
       - Use "stabilityai/stable-diffusion-2-1" model

   2.2. Chat Model (chat_model.py):
       - Use OpenRouter API by passing base url and API key to Langchain's implementation 
       - Use model "google/gemini-2.0-flash-lite-preview-02-05:free"

   2.3. Watercolor Agent (watercolor_agent.py):
       - Implement paint_watercolor tool
       - Store current image and result in agent state
       - Use system prompt focused on watercolor painting
       - Handle both text-only and image+text interactions

   2.4. Main Application (app.py):
       - Handle message processing
       - Manage chat history
       - Return both text responses and processed images

3. Testing:
   3.1. Implement automated tests:
       - Test chat without image
       - Test chat with image
       - Test image processing
       - Save test results to test_results directory
   3.2. Test the application by yourself running test scripts
   3.3. Make sure the application processes uploaded images

4. Authentication:
   4.1. Use OpenRouter API with provided credentials:
       - API Key: 
       - API Host: https://openrouter.ai/api/v1
       - Use default entities from Langchain - just pass provided base url and key. DO NOT EXTEND LANGCHAIN'S CLASSES

5. Dependencies:
   5.1. Required packages:
       - langchain
       - gradio
       - diffusers

6. Environment:
   6.1. Use Python virtual environment
   6.2. No fixed package versions required

7. User Experience:
   7.1. Assistant should:
       - Ask for item description if not provided
       - Only process watercolor painting-related requests
       - Maintain conversation context
       - Show both chat history and processed images

8. Image Processing Guidelines:
   8.1. Output images:
       - Focus on watercolor painting style
       - Use artistic watercolor appearance

</callout>
</checkable-item>
</p>

Learning how to write such descriptions is the most important part of working with code generation tools. Creating applications with AI is still software engineering. AI only helps with that. The good news is that AI is great at explaining complex terms and concepts. Put its abilities to the test. In the chat window, you can tag any file by pressing the <code>+</code> symbol and ask it to clarify something or do something based on the description in that file. For example like this.

<p>
<checkable-item title="Run this command in the chat window">
<warning>Don't forget to check that the file is added to the context, sometimes tagging stops working when inserted. Check it manually</warning>
<callout type="chat" include-file="project-rules.txt">
Explain to me all the technical terms and details in the project-rules.txt file the way one would explain to a teenager with poor computer skills. Use metaphors and analogies. Make me understand how the application works, what different parts of it are responsible for, and what libraries perform what role.
</callout>
</checkable-item>
</p>
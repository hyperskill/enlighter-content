<!-- Enlighter Metainfo
{
  "id": 55003,
  "title": "Pattern 2: Planner → Executor",
  "next_button_title": "Next"
}
-->
<h5>Planner → Executor Pattern</h5>
<p><strong>Problem</strong>: One model trying to both plan and execute complex tasks often yields poor quality or slow responses.</p>
<p><strong>Solution</strong>: Use a strong model to produce a plan, then hand the plan to a cheaper/faster model to execute. In ADK, you can compose this with a <code>SequentialAgent</code> or custom orchestration.</p>

<h5>When to apply</h5>
<ul>
  <li>Complex, multi-step goals (research → summarize → format).</li>
  <li>Workloads sensitive to latency/cost at execution time.</li>
  <li>Clear separation between "what to do" and "do it".</li>
  </ul>

<h5>Practical example (Google ADK)</h5>
<p>The Planner writes a structured plan to shared state. The Executor reads it and performs steps quickly.</p>

<alert>
<details>
<summary>Planner and Executor with shared state</summary>
<pre><code>from google.adk.agents import LlmAgent, SequentialAgent

PLAN_KEY = "plan_steps"

planner = LlmAgent(
    name="Planner",
    model="gemini-2.0-flash",  # consider a higher-quality model for planning
    instruction=(
        "Break the user's goal into 3-6 concrete steps. Output a numbered list. "
        f"Save them in state['{PLAN_KEY}'] as a JSON array of strings."
    ),
    output_key=PLAN_KEY,
)

executor = LlmAgent(
    name="Executor",
    model="gemini-2.0-flash",  # can use a cheaper/faster variant
    instruction=(
        f"Read state['{PLAN_KEY}']. Execute each step succinctly. "
        "Return the final result."
    ),
)

pipeline = SequentialAgent(
    name="PlanThenExecute",
    sub_agents=[planner, executor]
)
</code></pre>
</details>
</alert>

<callout label="Ask Cascade: create a plan-execute pipeline">
Using ADK, implement a two-stage pipeline where the first agent writes a plan to state and the second agent executes it. Test with a multi-step task (e.g., "Research 3 libraries, compare, and recommend one").
</callout>

<checkable-item title="A plan is generated and then executed by a separate agent."></checkable-item>

<p>Next, you will add a self-critique loop to improve quality via an internal reviewer.</p>


